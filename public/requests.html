<!DOCTYPE HTML>
<html lang = "en">
<head>
  <title>Requests</title>
  <meta charset = "UTF-8" />
</head>
<body>


    <script language="javascript">
        var u = "The Jackal";
        var f = "Burton";
        var l = "Guster";
        var p = "c'mon son"

        var user = { username: u,
                     firstname: f,
                     lastname: l,
                     password: p
        };

        // postData('/api/users', user);
        var response = requestData('/api/users');
        obj = response.json;
        console.log(obj.stringify());

        /*else {
            console.log("error!");
        }*/

        function postData(url, data) {
            const options = {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            }

            var result = fetch(url, options);
            return result
        };

        // uses get method - check response is okay
        function requestData(url) {
            fetch(url)
            .then(function(response) {
                if (response.ok) {
                    console.log(response);
                    return response;
                }
                console.log("error");
            })
            .catch(function(error) {
                console.log(error);
            });
        };

    </script>  


</body>
</html>
