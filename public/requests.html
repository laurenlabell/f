<!DOCTYPE HTML>
<head>
  <title>Requests</title>
  <meta charset = "UTF-8">
<script
  src="https://code.jquery.com/jquery-3.4.1.js"
  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  crossorigin="anonymous">
</script>
</head>
<body>


    <script language="javascript">
        var u = "The Jackal";
        var f = "Burton";
        var l = "Guster";
        var p = "c'mon son";

        var user = { username: u,
                     firstname: f,
                     lastname: l,
                     password: p
        };
        /*
        // postData('/api/users', user);
        var answer = requestData('/api/users');
        console.log(answer.stringify());

        //else {
            //console.log("error!");
        //}

        function postData(url, data) {
            const options = {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            }

            var result = fetch(url, options);
            return result
        };*/

        // uses get method - check response is okay
        /*function requestData(url) {
            fetch(url)
            .then(function(response) {
                if (response.ok) {
                    alert("gut");
                    console.log(response);
                    return response.json;
                }
                alert("error");
                console.log("error");
            })
            .catch(function(error) {
                alert("worse error");
                console.log(error);
            });
        };*/
//https://www.freecodecamp.org/news/here-is-the-most-popular-ways-to-make-an-http-request-in-javascript-954ce8c95aaa/


/*const Url='https://ez-recipe.herokuapp.com/api/users';
fetch(Url)
.then(data=>{return data.json()})
.then(res=>{console.log(res)})
.catch(error=>console.log(error))

console.log(data);*/

/*var Url = 'https://ez-recipe.herokuapp.com/api/users';
var response = await fetch(Url);

var deets = await response.json(); // read response body and parse as JSON

console.log(deets);*/


/*async function apiGetAll () {
   try {
     const resp = await fetch(URL)
     console.log(resp)
     return resp
    } catch (err) {
        console.log(err)
    }
}*/
//https://javascript.info/fetch


    function getRequest() {
        var request = new XMLHttpRequest();
        request.open("GET", "https://ez-recipe.herokuapp.com/api/users", true);

        request.onreadystatechange = function() {
            if (request.readyState == 4 && request.status == 200) {
                var result = request.responseText;    
                console.log(result);  
            }
            else if (request.readyState == 4 && request.status != 200) {
                console.log("error");
            }
        }

        request.send();
    }

    getRequest();



    </script>  


</body>
</html>



